<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}EventHub IQ{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://unpkg.com/@phosphor-icons/web"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script>
        const USER_ROLE = "{{ user_role }}";
    </script>
</head>

<body>
    <div class="container">
        <header>
            <div>
                <h1>EventHub IQ</h1>
                <p style="color: var(--text-secondary);">Smart Resource Allocation System</p>
            </div>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span style="color: var(--text-secondary); font-size: 0.9rem;">{{ user_email }}</span>

                <!-- Bell Icon for Admins/Teachers -->
                {% if user_role in ['admin', 'teacher'] %}
                <button id="approvals-bell"
                    style="position: relative; background: rgba(56, 189, 248, 0.1); color: #38bdf8; border: 1px solid rgba(56, 189, 248, 0.2); padding: 0.6rem; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                    <i class="ph ph-bell" style="font-size: 20px;"></i>
                    <span id="pending-count"
                        style="display: none; position: absolute; top: -5px; right: -5px; background: #ef4444; color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.7rem; font-weight: bold; display: flex; align-items: center; justify-content: center;">0</span>
                </button>
                {% endif %}

                {% if user_role == 'admin' %}
                <button id="reports-btn" title="View Reports"
                    style="background: rgba(168, 85, 247, 0.1); color: #a855f7; border: 1px solid rgba(168, 85, 247, 0.2); padding: 0.6rem; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                    <i class="ph ph-file-pdf" style="font-size: 20px;"></i>
                </button>
                <button id="trash-btn" title="Deleted Events"
                    style="background: rgba(234, 179, 8, 0.1); color: #eab308; border: 1px solid rgba(234, 179, 8, 0.2); padding: 0.6rem; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                    <i class="ph ph-trash" style="font-size: 20px;"></i>
                </button>
                {% endif %}

                <button id="logout-btn"
                    style="background: rgba(239, 68, 68, 0.1); color: #ef4444; border: 1px solid rgba(239, 68, 68, 0.2); padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer;">
                    <i class="ph ph-sign-out"></i> Logout
                </button>
            </div>
            <div style="display: flex; align-items: center; gap: 1rem;">
                <span id="system-status"
                    style="padding: 0.5rem 1rem; background: rgba(16, 185, 129, 0.1); border: 1px solid rgba(16, 185, 129, 0.2); border-radius: 8px;">System
                    Active ðŸŸ¢</span>

                <!-- Manual Booking Button -->
                <button id="manual-booking-btn"
                    style="background: var(--accent-color); color: white; border: none; padding: 0.6rem 1.2rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; font-weight: 600;">
                    <i class="ph ph-plus-circle" style="font-size: 1.2rem;"></i> New Event
                </button>
            </div>
        </header>

        {% block content %}{% endblock %}
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script src="{{ url_for('static', filename='approvals.js') }}"></script>
</body>

</html>